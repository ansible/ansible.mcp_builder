---
# Common role tasks - Set up generic MCP build environment
- name: Install jq for JSON processing
  ansible.builtin.package:
    name: jq
    state: present
  become: true

- name: Create unified MCP bin directory
  ansible.builtin.file:
    path: "{{ common_mcp_base_path }}/bin"
    state: directory
    mode: "0755"
  become: true

- name: Generate MCP management script
  ansible.builtin.include_tasks: generate_management.yml

- name: Create symlink for mcp_manage in system bin directory
  ansible.builtin.file:
    src: "{{ common_mcp_base_path }}/mcp_manage"
    dest: "{{ common_system_bin_path }}/mcp_manage"
    state: link
    force: true
  become: true
